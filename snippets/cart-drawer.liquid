{% comment %}
  Renders cart drawer

  Usage:
  {% render 'cart-drawer' %}
{% endcomment %}

{{ 'quantity-popover.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'cart-drawer.css' | asset_url | stylesheet_tag }}

<script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'quantity-popover.js' | asset_url }}" defer="defer"></script>

<style>
  .drawer {
    visibility: hidden;
  }
</style>

<cart-drawer class="drawer{% if cart == empty %} is-empty{% endif %}">
  <div id="CartDrawer" class="cart-drawer">
    <div id="CartDrawer-Overlay" class="cart-drawer__overlay"></div>
    <div
      class="drawer__inner gradient color-{{ settings.cart_color_scheme }}"
      role="dialog"
      aria-modal="true"
      aria-label="{{ 'sections.cart.title' | t }}"
      tabindex="-1"
    >
      <div class="drawer__header">
        <div class="header__grid">
          <div class="header__icon">
            <svg width="22" height="31" viewBox="0 0 22 31" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21.2845 15.6509C21.1938 15.2899 18.9851 6.79336 16.0315 1.32027L15.7853 0.862568C15.7594 0.817443 15.7205 0.791656 15.6687 0.791656H6.42577C6.37395 0.791656 6.33509 0.817443 6.30918 0.862568L6.06305 1.32027C3.10297 6.79336 0.894245 15.2963 0.803565 15.6509L0.79061 15.696C0.764701 15.8056 0.758224 15.9152 0.777656 16.0248V16.0699C1.85935 22.2521 5.87521 30.1233 6.05009 30.4585L6.28975 30.9291C6.30918 30.9742 6.361 31 6.40634 31H15.6752C15.727 31 15.7724 30.9742 15.7918 30.9291L16.0315 30.4585C16.1999 30.1233 20.2157 22.2521 21.2909 16.0699V16.0248C21.3168 15.9152 21.3104 15.8056 21.2909 15.696L21.278 15.6509H21.2845ZM14.4575 2.79652C14.5093 2.79652 14.5547 2.82231 14.5741 2.86743C16.6079 6.85782 18.2726 12.3502 18.9786 14.8322C18.998 14.9095 18.9397 14.9869 18.8555 14.9869C18.2726 14.9869 16.3164 14.9869 15.8307 14.9869C15.7659 14.9869 15.7141 14.9417 15.7011 14.8773C15.7011 14.8773 13.7709 3.70548 13.6219 2.84165C13.6219 2.81586 13.6414 2.79007 13.6673 2.79007H14.451L14.4575 2.79652ZM7.51394 2.86743C7.53337 2.82231 7.57871 2.79652 7.63053 2.79652C8.14223 2.79652 10.9015 2.79652 11.478 2.79652C11.5428 2.79652 11.5946 2.84165 11.6011 2.90611L13.6349 14.6903C13.6738 14.916 13.6219 14.9933 13.3758 14.9933C11.7695 14.9933 4.43727 14.9933 3.23251 14.9933C3.14831 14.9933 3.08354 14.916 3.10945 14.8322C3.81546 12.3502 5.4801 6.85782 7.51394 2.86743ZM11.4715 29.008H7.64348C7.59167 29.008 7.5528 28.9822 7.52689 28.9371C6.65895 27.1514 4.15227 21.8008 3.05115 17.1464C3.03172 17.0626 3.09649 16.9853 3.1807 16.9853H13.4989C13.5766 16.9853 13.6414 17.0562 13.6284 17.14L11.6011 28.8984C11.5881 28.9629 11.5363 29.008 11.4715 29.008ZM14.5547 28.9371C14.5352 28.9822 14.4899 29.008 14.4445 29.008C14.2956 29.008 13.9717 29.008 13.7774 29.008C13.6932 29.008 13.6349 28.9371 13.6478 28.8533L15.6752 17.0949C15.6882 17.0304 15.74 16.9853 15.8047 16.9853H18.9009C18.9851 16.9853 19.0498 17.0626 19.0304 17.1464C17.9293 21.8008 15.4291 27.1514 14.5547 28.9371Z" fill="white"/>
            </svg>
          </div>
          <h2 class="drawer__heading">your cart ({{ cart.item_count }})</h2>
          {% comment %} <div class="header__bg">
            <img src="https://cdn.shopify.com/s/files/1/0520/6877/8179/files/Component_295.png?v=1727083944" alt="">
          </div> {% endcomment %}
        </div>
        <button
          class="drawer__close"
          type="button"
          onclick="this.closest('cart-drawer').close()"
          aria-label="{{ 'accessibility.close' | t }}"
        >
          <div class="close__icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_0_354)">
              <path d="M19.0711 4.92892L4.92894 19.0711" stroke="white" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"/>
              <path d="M19.0711 19.0711L4.92892 4.92892" stroke="white" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"/>
              </g>
              <defs>
              <clipPath id="clip0_0_354">
              <rect width="24" height="24" fill="white"/>
              </clipPath>
              </defs>
            </svg>
          </div>
        </button>
      </div>
      {%- if cart == empty -%}
        <div class="drawer__inner-empty">
          <div class="cart-drawer__warnings center">
            <div class="cart-drawer__empty-content">
              <h2 class="cart__empty-text">Your bag is empty</h2>
              {% if settings.quote != blank %}
                <div class="cart__quote">
                  <div class="stars__grid">
                    {% for i in (1..5) %}
                      <div class="star">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <g>
                          <path d="M6.87082 10.767C6.95026 10.719 7.04974 10.719 7.12918 10.767L10.8188 12.9938C11.0081 13.1081 11.2416 12.9384 11.1914 12.723L10.2123 8.52595C10.1912 8.43558 10.2219 8.34096 10.2921 8.2802L13.5522 5.45597C13.7193 5.31117 13.6299 5.0366 13.4096 5.01791L9.11722 4.65374C9.02482 4.64591 8.94436 4.58757 8.90817 4.5022L7.23018 0.543092C7.14403 0.339835 6.85597 0.339835 6.76982 0.543092L5.09183 4.5022C5.05564 4.58757 4.97518 4.64591 4.88278 4.65374L0.590407 5.01791C0.37005 5.0366 0.280699 5.31117 0.447848 5.45597L3.70795 8.2802C3.77809 8.34096 3.8088 8.43558 3.78772 8.52595L2.8086 12.723C2.75836 12.9384 2.99192 13.1081 3.18125 12.9938L6.87082 10.767Z" fill="#0C0C0C"/>
                          </g>
                          <defs>
                          <clipPath id="clip0_0_572">
                          <rect width="14" height="14" fill="white"/>
                          </clipPath>
                          </defs>
                        </svg>
                      </div>
                    {% endfor %}
                  </div>
                  <div class="quote">{{ settings.quote }}</div>
                  {% if settings.name != blank %}
                    <span class="name">{{ settings.name }}</span>
                  {% endif %}
                </div>
              {% endif %}
            </div>
            {% if settings.cart_upsell != blank %}
              {% render "cart-upsell", upsellCollection: settings.cart_upsell %}
            {% endif %}
          </div>
        </div>
      {%- endif -%}
      <cart-drawer-items
        {% if cart == empty %}
          class=" is-empty"
        {% endif %}
      >
        <form
          action="{{ routes.cart_url }}"
          id="CartDrawer-Form"
          class="cart__contents cart-drawer__form"
          method="post"
        >
          <div id="CartDrawer-CartItems" class="drawer__contents js-contents">
            {%- if cart != empty -%}
              <div class="drawer__cart-items-wrapper">
                <table class="cart-items" role="table">
                  <tbody role="rowgroup">
                    {%- for item in cart.items -%}
                      <tr id="CartDrawer-Item-{{ item.index | plus: 1 }}" class="cart-item" role="row">
                        <td class="cart-item__media" role="cell" headers="CartDrawer-ColumnProductImage">
                          {% if item.image %}
                            {% comment %} Leave empty space due to a:empty CSS display: none rule {% endcomment %}
                            <a href="{{ item.url }}" class="cart-item__link" tabindex="-1" aria-hidden="true"> </a>
                            <img
                              class="cart-item__image"
                              src="{{ item.image | image_url: width: 300 }}"
                              alt="{{ item.image.alt | escape }}"
                              loading="lazy"
                              width="150"
                              height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}"
                            >
                          {% endif %}
                        </td>

                        <td class="line__details">
                          <div class="cart-item__details" role="cell" headers="CartDrawer-ColumnProduct">
                            {%- if settings.show_vendor -%}
                              <p class="caption-with-letter-spacing light">{{ item.product.vendor }}</p>
                            {%- endif -%}

                            <a href="{{ item.url }}" class="cart-item__name h4 break">
                              {{- item.product.title | escape -}}
                            </a>

                            {%- if item.original_price != item.final_price -%}
                              <div class="cart-item__discounted-prices">
                                <span class="visually-hidden">
                                  {{ 'products.product.price.regular_price' | t }}
                                </span>
                                <s class="cart-item__old-price product-option">
                                  {{- item.original_price | money | remove: '.00' -}}
                                </s>
                                <span class="visually-hidden">
                                  {{ 'products.product.price.sale_price' | t }}
                                </span>
                                <strong class="cart-item__final-price product-option">
                                  {{ item.final_price | money | remove: '.00' }}
                                </strong>
                              </div>
                            {%- else -%}
                              <div class="product-option custom_price">
                                {% comment %}
                                {{ item.original_price | money | remove: '.00' }}
                                {% endcomment %}
                                {% if item.product.compare_at_price > item.product.price  %}
                                <span class="regular-price">{{ item.product.price | money | remove: '.00' }}</span> <span class="sale-price">{{ item.product.compare_at_price | money | remove: '.00' }}</span>
                                {% endif %}
                              </div>
                            {%- endif -%}
                          </div>
                          
                          {%- if item.product.has_only_default_variant == false
                            or item.properties.size != 0
                            or item.selling_plan_allocation != null
                          -%}
                            <dl>
                              {%- if item.product.has_only_default_variant == false -%}
                                {%- for option in item.options_with_values -%}
                                  <div class="product-option">
                                    <dt>{{ option.name }}:</dt>
                                    <dd>
                                      {{ option.value -}}
                                      {%- unless forloop.last %}, {% endunless %}
                                    </dd>
                                  </div>
                                {%- endfor -%}
                              {%- endif -%}

                              {%- for property in item.properties -%}
                                {%- assign property_first_char = property.first | slice: 0 -%}
                                {%- if property.last != blank and property_first_char != '_' -%}
                                  <div class="product-option">
                                    <dt>{{ property.first }}:</dt>
                                    <dd>
                                      {%- if property.last contains '/uploads/' -%}
                                        <a
                                          href="{{ property.last }}"
                                          class="link"
                                          target="_blank"
                                          aria-describedby="a11y-new-window-message"
                                        >
                                          {{ property.last | split: '/' | last }}
                                        </a>
                                      {%- else -%}
                                        {{ property.last }}
                                      {%- endif -%}
                                    </dd>
                                  </div>
                                {%- endif -%}
                              {%- endfor -%}
                            </dl>

                            <p class="product-option">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                          {%- endif -%}

                          <ul
                            class="discounts list-unstyled"
                            role="list"
                            aria-label="{{ 'customer.order.discount' | t }}"
                          >
                            {%- for discount in item.line_level_discount_allocations -%}
                              <li class="discounts__discount">
                                {%- render 'icon-discount' -%}
                                {{ discount.discount_application.title }}
                              </li>
                            {%- endfor -%}
                          </ul>
                          {% if item.product.metafields.custom.product_color_detail_text != blank %}
                            <p class="meta-text">{{ item.product.metafields.custom.product_color_detail_text }}</p>
                          {% endif %}
                          {% comment %} 
                            <td class="cart-item__totals right" role="cell" headers="CartDrawer-ColumnTotal">
                              {%- render 'loading-spinner' -%}
                              <div class="cart-item__price-wrapper">
                                {%- if item.original_line_price != item.final_line_price -%}
                                  <div class="cart-item__discounted-prices">
                                    <span class="visually-hidden">
                                      {{ 'products.product.price.regular_price' | t }}
                                    </span>
                                    <s class="cart-item__old-price price price--end">
                                      {{ item.original_line_price | money }}
                                    </s>
                                    <span class="visually-hidden">
                                      {{ 'products.product.price.sale_price' | t }}
                                    </span>
                                    <span class="price price--end">
                                      {{ item.final_line_price | money }}
                                    </span>
                                  </div>
                                {%- else -%}
                                  <span class="price price--end">
                                    {{ item.original_line_price | money }}
                                  </span>
                                {%- endif -%}

                                {%- if item.variant.available and item.unit_price_measurement -%}
                                  <div class="unit-price caption">
                                    <span class="visually-hidden">{{ 'products.product.price.unit_price' | t }}</span>
                                    {{ item.unit_price | money }}
                                    <span aria-hidden="true">/</span>
                                    <span class="visually-hidden"
                                      >&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span
                                    >
                                    {%- if item.unit_price_measurement.reference_value != 1 -%}
                                      {{- item.unit_price_measurement.reference_value -}}
                                    {%- endif -%}
                                    {{ item.unit_price_measurement.reference_unit }}
                                  </div>
                                {%- endif -%}
                              </div>
                            </td> 
                          {% endcomment %}
                          {%- liquid
                            assign has_qty_rules = false
                            if item.variant.quantity_rule.increment > 1 or item.variant.quantity_rule.min > 1 or item.variant.quantity_rule.max != null
                              assign has_qty_rules = true
                            endif

                            assign has_vol_pricing = false
                            if item.variant.quantity_price_breaks.size > 0
                              assign has_vol_pricing = true
                            endif
                          -%}
                          <div
                            class="cart-item__quantity {% if has_qty_rules or has_vol_pricing %} cart-item__quantity--info{% endif %}"
                            role="cell"
                            headers="CartDrawer-ColumnQuantity"
                          >
                            <quantity-popover>
                              <div class="cart-item__quantity-wrapper quantity-popover-wrapper">
                                <div class="quantity-popover-container{% if has_qty_rules or has_vol_pricing %} quantity-popover-container--hover{% endif %}">
                                  <quantity-input class="quantity cart-quantity">
                                    <button class="quantity__button" name="minus" type="button">
                                      <span class="visually-hidden">
                                        {{-
                                          'products.product.quantity.decrease'
                                          | t: product: item.product.title
                                          | escape
                                        -}}
                                      </span>
                                      <div class="quantity__icon">
                                        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                          <path d="M9.71231 5.625H2.28769" stroke="black" stroke-width="1.2" stroke-linecap="square" stroke-linejoin="round"/>
                                        </svg>
                                      </div>
                                    </button>
                                    <input
                                      class="quantity__input"
                                      type="number"
                                      data-quantity-variant-id="{{ item.variant.id }}"
                                      name="updates[]"
                                      value="{{ item.quantity }}"
                                      {% # theme-check-disable %}
                                      data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
                                      min="0"
                                      data-min="{{ item.variant.quantity_rule.min }}"
                                      {% if item.variant.quantity_rule.max != null %}
                                        max="{{ item.variant.quantity_rule.max }}"
                                      {% endif %}
                                      step="{{ item.variant.quantity_rule.increment }}"
                                      {% # theme-check-enable %}
                                      aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"
                                      id="Drawer-quantity-{{ item.index | plus: 1 }}"
                                      data-index="{{ item.index | plus: 1 }}"
                                    >
                                    <button class="quantity__button" name="plus" type="button">
                                      <span class="visually-hidden">
                                        {{-
                                          'products.product.quantity.increase'
                                          | t: product: item.product.title
                                          | escape
                                        -}}
                                      </span>
                                      <div class="quantity__icon">
                                        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                          <path d="M9.71231 5.625H2.28769" stroke="black" stroke-width="1.2" stroke-linecap="square" stroke-linejoin="round"/>
                                          <path d="M6 1.91269V9.33731" stroke="black" stroke-width="1.2" stroke-linecap="square" stroke-linejoin="round"/>
                                        </svg>                                                                          
                                      </div>
                                    </button>
                                  </quantity-input>
                                </div>
                                <cart-remove-button
                                  id="CartDrawer-Remove-{{ item.index | plus: 1 }}"
                                  data-index="{{ item.index | plus: 1 }}"
                                >
                                  <button
                                    type="button"
                                    class="button button--tertiary cart-remove-button"
                                    aria-label="{{ 'sections.cart.remove_title' | t: title: item.title | escape }}"
                                    data-variant-id="{{ item.variant.id }}"
                                  >
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                      <path d="M14 11V17M10 11V17M6 7V19C6 19.5304 6.21071 20.0391 6.58579 20.4142C6.96086 20.7893 7.46957 21 8 21H16C16.5304 21 17.0391 20.7893 17.4142 20.4142C17.7893 20.0391 18 19.5304 18 19V7M4 7H20M7 7L9 3H15L17 7" stroke="black" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>                                                             
                                  </button>
                                </cart-remove-button>
                              </div>
                              {%- if has_qty_rules or has_vol_pricing -%}
                                <button
                                  type="button"
                                  class="quantity-popover__info-button quantity-popover__info-button--icon-with-label button button--tertiary"
                                  aria-expanded="false"
                                >
                                  {% render 'icon-info' %}
                                  <span>
                                    {%- if has_vol_pricing -%}
                                      {{ 'products.product.volume_pricing.note' | t }}
                                    {%- elsif has_qty_rules -%}
                                      {{ 'products.product.quantity.note' | t }}
                                    {%- endif -%}
                                  </span>
                                </button>
                              {%- endif -%}
                              {%- if has_vol_pricing or has_qty_rules -%}
                                <div
                                  class="cart-items__info global-settings-popup quantity-popover__info"
                                  tabindex="-1"
                                  hidden
                                >
                                  {%- if has_qty_rules == false -%}
                                    <span class="volume-pricing-label caption">
                                      {{- 'products.product.volume_pricing.title' | t -}}
                                    </span>
                                  {%- endif -%}
                                  <div class="quantity__rules caption">
                                    {%- if item.variant.quantity_rule.increment > 1 -%}
                                      <span class="divider">
                                        {{-
                                          'products.product.quantity.multiples_of'
                                          | t: quantity: item.variant.quantity_rule.increment
                                        -}}
                                      </span>
                                    {%- endif -%}
                                    {%- if item.variant.quantity_rule.min > 1 -%}
                                      <span class="divider">
                                        {{-
                                          'products.product.quantity.min_of'
                                          | t: quantity: item.variant.quantity_rule.min
                                        -}}
                                      </span>
                                    {%- endif -%}
                                    {%- if item.variant.quantity_rule.max != null -%}
                                      <span class="divider">
                                        {{-
                                          'products.product.quantity.max_of'
                                          | t: quantity: item.variant.quantity_rule.max
                                        -}}
                                      </span>
                                    {%- endif -%}
                                  </div>
                                  <button
                                    class="button-close button button--tertiary"
                                    type="button"
                                    aria-label="{{ 'accessibility.close' | t }}"
                                  >
                                    {%- render 'icon-close' -%}
                                  </button>
                                  {%- if item.variant.quantity_price_breaks.size > 0 -%}
                                    <volume-pricing class="parent-display">
                                      <ul class="list-unstyled">
                                        <li>
                                          <span>{{ item.variant.quantity_rule.min }}+</span>
                                          <span>{{ item.variant.price | money_with_currency }}/ea</span>
                                        </li>
                                        {%- for price_break in item.variant.quantity_price_breaks -%}
                                          <li>
                                            <span>
                                              {{- price_break.minimum_quantity -}}
                                              <span aria-hidden="true">+</span></span
                                            >
                                            <span>{{ price_break.price | money_with_currency }}/ea</span>
                                          </li>
                                        {%- endfor -%}
                                      </ul>
                                    </volume-pricing>
                                  {%- endif -%}
                                </div>
                              {%- endif -%}
                              <div
                                id="CartDrawer-LineItemError-{{ item.index | plus: 1 }}"
                                class="cart-item__error"
                                role="alert"
                              >
                                <small class="cart-item__error-text"></small>
                                <svg
                                  aria-hidden="true"
                                  focusable="false"
                                  class="icon icon-error"
                                  viewBox="0 0 13 13"
                                >
                                  <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                                  <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                                  <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                                  <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7">
                                </svg>
                              </div>
                            </quantity-popover>
                          </div>
                        </td>
                      </tr>
                    {%- endfor -%}
                  </tbody>
                </table>
              </div>
            {%- endif -%}
            <p id="CartDrawer-LiveRegionText" class="visually-hidden" role="status"></p>
            <p id="CartDrawer-LineItemStatus" class="visually-hidden" aria-hidden="true" role="status">
              {{ 'accessibility.loading' | t }}
            </p>
          </div>
          <div id="CartDrawer-CartErrors" role="alert"></div>
        </form>
        {% if cart != empty and settings.cart_upsell != blank %}
          {% render "cart-upsell", upsellCollection: settings.cart_upsell %}
        {% endif %}
      </cart-drawer-items>
      <div class="drawer__footer">
        {%- if settings.show_cart_note -%}
          <details id="Details-CartDrawer">
            <summary>
              <span class="summary__title">
                {{ 'sections.cart.note' | t }}
                {% render 'icon-caret' %}
              </span>
            </summary>
            <cart-note class="cart__note field">
              <label class="visually-hidden" for="CartDrawer-Note">{{ 'sections.cart.note' | t }}</label>
              <textarea
                id="CartDrawer-Note"
                class="text-area text-area--resize-vertical field__input"
                name="note"
                placeholder="{{ 'sections.cart.note' | t }}"
              >{{ cart.note }}</textarea>
            </cart-note>
          </details>
        {%- endif -%}

        <!-- Start blocks -->
        <!-- Subtotals -->

        <div class="cart-drawer__footer" {{ block.shopify_attributes }}>
          
          <!-- Route Code Edited 12/11/2024 -->
          <div class="route-div" data-allow-multiple-renders data-remove-form-action data-redirect-to-checkout></div>
          <!-- Route Code End --> 
          
          {% if cart == empty %}
            <a href="{{ routes.all_products_collection_url }}" class="button">
              {{ 'general.continue_shopping' | t }}
            </a>
          {% else %}
            {%- if cart.cart_level_discount_applications.size > 0 -%}
              <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                {%- for discount in cart.cart_level_discount_applications -%}
                  <li class="discounts__discount discounts__discount--end">
                    {%- render 'icon-discount' -%}
                    {{ discount.title | escape }}
                    (-{{ discount.total_allocated_amount | money }})
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
            <div class="cart__ctas" {{ block.shopify_attributes }}>
              <button
                type="submit"
                id="CartDrawer-Checkout"
                class="cart__checkout-button button"
                name="checkout"
                form="CartDrawer-Form"
                {% if cart == empty %}
                  disabled
                {% endif %}
              >
                {{ 'sections.cart.checkout' | t }} -
                <span class="total__price">{{ cart.total_price | money_with_currency | remove: ".00" }}</span>
                {% assign cart_total = 0 %}
                {% assign compared_total = 0 %}
                {% assign amount_saved = 0 %}
                {% for item in cart.items %}
                {% assign item_total = item.quantity | times: item.product.price %}
                {% assign item_compare_total = item.quantity | times: item.product.compare_at_price %}
                {% assign cart_total = cart_total | plus: item_total %}
                {% if item.product.compare_at_price > item.product.price %}
                {% assign compared_total = compared_total | plus: item_compare_total %}
                {% endif %}
                {% endfor %}
                {% assign amount_saved = compared_total | minus: cart_total %}
                {% if compared_total > cart_total %}
                <span class="compared_price_cart_total">{{ compared_total | money_with_currency }}</span>
                {% endif %}
              </button>
            </div>
            <small class="tax-note caption-large rte">Shipping and taxes calculated at checkout</small>
          {% endif %}
          <i data-govx-id="s"></i>
        </div>
      </div>
    </div>
  </div>
</cart-drawer>
